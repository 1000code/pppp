{"version":3,"sources":["API/Dashboard.js","Pages/Dashboard/Dashboard.jsx"],"names":["getSumParcelByDateBranch","_ref","Object","asyncToGenerator","_regeneratorRuntime","mark","_callee","branch_code","wrap","_context","prev","next","axios","post","process","headers","Content-Type","abrupt","sent","stop","_x","apply","this","arguments","getSumParcelByMonthBranchChart","_ref2","_callee2","_context2","_x2","getSumParcelByYearBranchChart","_ref3","_callee3","_context3","_x3","getSumUserBranchByBranch","_ref4","_callee4","_context4","_x4","getSumReceiveParcels","_ref5","_callee5","_context5","_x5","Dashboard","user","useSelector","state","objectSpread","_useState","useState","_useState2","slicedToArray","branchCode","setBranchCode","_useState3","_useState4","parcel","setParcel","_useState5","_useState6","users","setUsers","_useState7","_useState8","receiveParcel","setReceiveParcel","_useState9","_useState10","parcelMonthChart","setParcelMonthChart","_useState11","_useState12","parcelYearChart","setParcelYearChart","useEffect","LoadBranchCode","LoadUserBranch","LoadReceiveParcel","LoadParcelMonth","LoadParcelYear","then","res","data","length","console","log","catch","err","response","ChartJS","register","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","dataM","labels","map","dateMonth","datasets","label","count","backgroundColor","dataY","dateYear","react_default","a","createElement","Fragment","className","totalReceiveParcel","totalUser","dist","options","responsive","scales","yAxes","display","ticks","beginAtZero","max","min","plugins","legend","position","title","text"],"mappings":"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","file":"static/js/17.25ed9fd7.chunk.js","sourcesContent":["import axios from \"axios\";\nexport const getSumParcelByDateBranch = async (branch_code) => {\n    return await axios.post(process.env.REACT_APP_API_PATH + \"/parcel-sum-by-date-branch\", branch_code, {\n        headers: {\n            \"Content-Type\": \"application/json\",\n\n        },\n    });\n};\nexport const getSumParcelByMonthBranchChart = async (branch_code) => {\n    return await axios.post(process.env.REACT_APP_API_PATH + \"/parcel-sum-month\", branch_code, {\n        headers: {\n            \"Content-Type\": \"application/json\",\n\n        },\n    });\n};\nexport const getSumParcelByYearBranchChart = async (branch_code) => {\n    return await axios.post(process.env.REACT_APP_API_PATH + \"/parcel-sum-year\", branch_code, {\n        headers: {\n            \"Content-Type\": \"application/json\",\n\n        },\n    });\n};\n\nexport const getSumUserBranchByBranch = async (branch_code) => {\n    return await axios.post(process.env.REACT_APP_API_PATH + \"/user-count-by-branch\", branch_code, {\n        headers: {\n            \"Content-Type\": \"application/json\",\n\n        },\n    });\n};\nexport const getSumReceiveParcels = async (branch_code) => {\n    return await axios.post(process.env.REACT_APP_API_PATH + \"/parcel-sum-receive\", branch_code, {\n        headers: {\n            \"Content-Type\": \"application/json\",\n\n        },\n    });\n};\n// export const getSumUserBranchByBranch = async (branch_code) => {\n//     return await axios.post(process.env.REACT_APP_API_PATH + \"/user-count-by-branch\",branch_code, {\n//         headers: {\n//             \"Content-Type\": \"application/json\",\n            \n//         },\n//     });\n// };","import React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport \"../../Assets/css/Dashboard.css\";\nimport {\n  getSumParcelByDateBranch,\n  getSumUserBranchByBranch,\n  getSumReceiveParcels,\n  getSumParcelByMonthBranchChart,\n  getSumParcelByYearBranchChart,\n} from \"../../API/Dashboard\";\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n} from \"chart.js\";\nimport { Bar } from \"react-chartjs-2\";\n\nconst Dashboard = () => {\n  const { user } = useSelector((state) => ({ ...state }));\n  const [branchCode, setBranchCode] = useState({\n    branch_code: \"\",\n  });\n\n  const [parcel, setParcel] = useState([]);\n  const [users, setUsers] = useState([]);\n  const [receiveParcel, setReceiveParcel] = useState([]);\n  const [parcelMonthChart, setParcelMonthChart] = useState([]);\n  const [parcelYearChart, setParcelYearChart] = useState([]);\n\n  useEffect(() => {\n    user && setBranchCode({ branch_code: user.branch_code });\n  }, [user]);\n\n  useEffect(() => {\n    branchCode.branch_code !== \"\" && LoadBranchCode(branchCode);\n    branchCode.branch_code !== \"\" && LoadUserBranch(branchCode);\n    branchCode.branch_code !== \"\" && LoadReceiveParcel(branchCode);\n    branchCode.branch_code !== \"\" && LoadParcelMonth(branchCode);\n    branchCode.branch_code !== \"\" && LoadParcelYear(branchCode);\n  }, [branchCode]);\n\n  const LoadBranchCode = (branch_code) => {\n    getSumParcelByDateBranch(branch_code)\n      .then((res) => {\n        if (res.data.length > 0) {\n          setParcel(res.data[0]);\n        }\n        console.log(res);\n      })\n      .catch((err) => {\n        console.log(err.response.data);\n      });\n  };\n  const LoadUserBranch = (branch_code) => {\n    getSumUserBranchByBranch(branch_code)\n      .then((res) => {\n        if (res.data.length > 0) {\n          setUsers(res.data);\n        }\n      })\n      .catch((err) => {\n        console.log(err.response.data);\n      });\n  };\n  const LoadReceiveParcel = (branch_code) => {\n    getSumReceiveParcels(branch_code)\n      .then((res) => {\n        if (res.data.length > 0) {\n          setReceiveParcel(res.data[0]);\n        }\n        // console.log(res.data);\n      })\n      .catch((err) => {\n        console.log(err.response.data);\n      });\n  };\n  const LoadParcelMonth = (branch_code) => {\n    getSumParcelByMonthBranchChart(branch_code)\n      .then((res) => {\n        if (res.data.length > 0) {\n          setParcelMonthChart(res.data);\n        }\n        console.log(res.data);\n      })\n      .catch((err) => {\n        console.log(err.response.data);\n      });\n  };\n  const LoadParcelYear = (branch_code) => {\n    getSumParcelByYearBranchChart(branch_code)\n      .then((res) => {\n        if (res.data.length > 0) {\n          setParcelYearChart(res.data);\n        }\n        console.log(res.data);\n      })\n      .catch((err) => {\n        console.log(err.response.data);\n      });\n  };\n\n  ChartJS.register(\n    CategoryScale,\n    LinearScale,\n    BarElement,\n    Title,\n    Tooltip,\n    Legend\n  );\n\n  const optionsM = {\n    responsive: true,\n    scales: {\n      yAxes: [\n        {\n          display: true,\n          ticks: {\n            beginAtZero: true,\n            max: 200,\n            min: 0,\n          },\n        },\n      ],\n    },\n    plugins: {\n      legend: {\n        position: \"top\",\n      },\n      title: {\n        display: true,\n        text: \"Chart Month\",\n      },\n    },\n  };\n\n  const dataM = {\n    // labels: [\n    //   \"June\",\n    //   \"July\",\n    //   \"August\",\n    //   \"September\",\n    //   \"October\",\n    //   \"November\",\n    //   \"December\"],\n    labels: parcelMonthChart.map((data) => \"ເດືອນ \" + data.dateMonth),\n\n    datasets: [\n      {\n        label: \"ພັດສະດຸ\",\n        data: parcelMonthChart.map((data) => data.count),\n        backgroundColor: [\"#ff2000\", \"rgb(213,175,26)\"],\n      },\n    ],\n  };\n  const optionsY = {\n    responsive: true,\n    scales: {\n      yAxes: [\n        {\n          display: true,\n          ticks: {\n            beginAtZero: true,\n            max: 200,\n            min: 0,\n          },\n        },\n      ],\n    },\n    plugins: {\n      legend: {\n        position: \"top\",\n      },\n      title: {\n        display: true,\n        text: \"Chart Year\",\n      },\n    },\n  };\n\n  const dataY = {\n    labels: parcelYearChart.map((data) => \"ປີ \" + data.dateYear),\n\n    datasets: [\n      {\n        label: \"ພັດສະດຸ\",\n        data: parcelYearChart.map((data) => data.count),\n        backgroundColor: [\"#ff2000\", \"rgb(213,175,26)\"],\n      },\n    ],\n  };\n  return (\n    <>\n      <div className=\"container-xxl\">\n        <div className=\"row mt-4\">\n          <div className=\"col-lg-4 col-sm-4\">\n            <div className=\"d-card\">\n              <div className=\"d-card_icon\">\n                <i className=\"fas fa-archive\"></i>\n              </div>\n              <div className=\"d-card_info\">\n                <h4 className=\"\">\n                  {parcel && parcel.count > 0 ? parcel.count : 0}\n                </h4>\n                <span>ພັດສະດຸທີ່ເພີ່ມໃໝ່ໃນມື້ນີ້</span>\n              </div>\n            </div>\n          </div>\n          <div className=\"col-lg-4 col-sm-4\">\n            <div className=\"d-card\">\n              <div className=\"d-card_icon\">\n                <i className=\"fas fa-boxes\"></i>\n              </div>\n              <div className=\"d-card_info\">\n                <h4 className=\"\">\n                  {receiveParcel && receiveParcel.totalReceiveParcel > 0\n                    ? receiveParcel.totalReceiveParcel\n                    : 0}\n                </h4>\n                <span>ພັດສະດຸທີ່ຮັບເຂົ້າໃນມື້ນີ້</span>\n              </div>\n            </div>\n          </div>\n          <div className=\"col-lg-4 col-sm-4\">\n            <div className=\"d-card\">\n              <div className=\"d-card_icon\">\n                <i className=\"fas fa-user-circle\"></i>\n              </div>\n              <div className=\"d-card_info\">\n                <h4 className=\"\">\n                  {users.length > 0 ? users[0].totalUser : 0}\n                </h4>\n                <span>ພະນັກງານສາຂາ</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"chart \">\n        <div className=\"chart-box \">\n          <Bar options={optionsM} data={dataM} />\n        </div>\n        <div className=\"chart-box\">\n          <Bar options={optionsY} data={dataY} />\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Dashboard;\n"],"sourceRoot":""}