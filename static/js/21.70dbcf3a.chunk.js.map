{"version":3,"sources":["API/UserBranch.js","Pages/Users/ListStaff.jsx"],"names":["setUserBranch","_ref","Object","_Users_1000code_Desktop_branch_cloudexpress_com_node_modules_pnpm_babel_runtime_7_3_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__","_regeneratorRuntime","mark","_callee","data","auth_token","wrap","_context","prev","next","axios","post","process","headers","Content-Type","abrupt","sent","stop","_x","_x2","apply","this","arguments","getOneUserBranch","_ref2","_callee2","id","_context2","get","content-type","_x3","_x4","getUserBranchByBranchCode","_ref3","_callee3","branch_code","_context3","_x5","_x6","removeUserBranch","_ref4","_callee4","_context4","delete","_x7","_x8","updateUserById","_ref5","_callee5","_context5","put","_x9","_x10","_x11","ListStaff","user","useSelector","state","_Users_1000code_Desktop_branch_cloudexpress_com_node_modules_pnpm_babel_runtime_7_3_1_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__","token","_useState","useState","_useState2","_Users_1000code_Desktop_branch_cloudexpress_com_node_modules_pnpm_babel_runtime_7_3_1_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__","filterData","setFilterData","_useState3","_useState4","page","setPage","_useState5","_useState6","pageSize","setPageSize","_useState7","_useState8","loading","then","res","catch","err","Alert","error","response","msg","useEffect","console","log","columns","title","dataIndex","key","filterDropdown","setSelectedKeys","selectedKeys","confirm","react__WEBPACK_IMPORTED_MODULE_3___default","a","createElement","antd__WEBPACK_IMPORTED_MODULE_9__","autoFocus","placeholder","value","onChange","e","target","closeDropdown","onPressEnter","filterIcon","_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__","onFilter","record","username","toLowerCase","includes","_Users_1000code_Desktop_branch_cloudexpress_com_node_modules_pnpm_babel_runtime_7_3_1_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","indexOf","b","length","render","row","className","role_","userType","role_sub_branch","phone","WhatsApp","react_router_dom__WEBPACK_IMPORTED_MODULE_7__","to","_id","onClick","Swal","fire","icon","showDenyButton","showCancelButton","confirmButtonText","confirmButtonColor","cancelButtonColor","cancelButtonText","result","isConfirmed","success","type","Fragment","antd__WEBPACK_IMPORTED_MODULE_10__","dataSource","bordered","filters","sorter","pagination","total","showTotal","concat","current","pageSizeOptions","showPageSizeOptions"],"mappings":"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","file":"static/js/21.70dbcf3a.chunk.js","sourcesContent":["import axios from \"axios\";\n\n\nexport const setUserBranch = async(data, auth_token) => {\n    return await axios.post(process.env.REACT_APP_API_PATH + \"/u_branch\", data, {\n        headers: {\n            \"Content-Type\": \"application/json\",\n            auth_token,\n        },\n    });\n};\n\nexport const getOneUserBranch = async(id, auth_token) => {\n    return await axios.get(\n        process.env.REACT_APP_API_PATH + \"/u_branch/\" + id, {\n            headers: {\n                \"content-type\": \"application/json\",\n                auth_token,\n            }\n        }\n    )\n}\n\n////=====work===\nexport const getUserBranchByBranchCode = async(branch_code, auth_token) => {\n    return await axios.get(process.env.REACT_APP_API_PATH + \"/user-branches/\" + branch_code, {\n        headers: {\n            \"Content-Type\": \"application/json\",\n            auth_token,\n        },\n    });\n};\n\n////work\nexport const removeUserBranch = async(id, auth_token) => {\n    // console.log(auth_token)\n    return await axios.delete(\n        process.env.REACT_APP_API_PATH + \"/u_branch/\" + id, {\n            headers: {\n                \"Content-Type\": \"application/json\",\n                auth_token,\n            },\n        }\n    );\n};\n\n\nexport const updateUserById = async(id, data, auth_token) => {\n    return await axios.put(\n        process.env.REACT_APP_API_PATH + \"/u_branch/\" + id, data, {\n            headers: {\n                \"Content-Type\": \"application/json\",\n                auth_token,\n            },\n        }\n    );\n};","import React, { useState, useEffect } from \"react\";\nimport Swal from \"sweetalert2\";\nimport {\n  getUserBranchByBranchCode,\n  removeUserBranch,\n} from \"../../API/UserBranch\";\nimport Alert from \"../../Components/Alert\";\nimport { Link } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { Table, Input } from \"antd\";\nimport { SearchOutlined } from \"@ant-design/icons\";\nimport { userType } from \"../../Functions/Functions\";\nconst ListStaff = () => {\n  const { user } = useSelector((state) => ({ ...state }));\n  const { token } = user;\n\n  const [filterData, setFilterData] = useState([]);\n  const [page, setPage] = useState(1);\n  const [pageSize, setPageSize] = useState(5);\n  const [showRider, setShowRider] = useState(false);\n\n  const loading = (token) => {\n    getUserBranchByBranchCode(user.branch_code, token)\n      .then((res) => {\n        setFilterData(res.data);\n      })\n      .catch((err) => {\n        Alert.error(err.response.data.msg);\n      });\n  };\n  useEffect(() => {\n    loading(token);\n  }, []);\n\n  console.log(filterData);\n  //====================Alert delete confirm===========\n  const handleClick = (id) => {\n    Swal.fire({\n      title: \"ຕ້ອງການລົບຜູ້ໃຊ້ນີ້ບໍ່?\",\n      icon: \"warning\",\n      showDenyButton: false,\n      showCancelButton: true,\n      confirmButtonText: \"ຢືນຢັນ\",\n      confirmButtonColor: \"#ff2000\",\n      cancelButtonColor: \"#b8b8b8\",\n      cancelButtonText: \"ຍົກເລີກ\",\n    }).then((result) => {\n      if (result.isConfirmed) {\n        //\n        removeUserBranch(id, token)\n          .then((res) => {\n            if (res.data.success) {\n              Alert(\"success\", res.data.success);\n              loading(token);\n            } else {\n              Alert(\"error\", res.data.error);\n            }\n          })\n          .catch((err) => {\n            Alert(\"error\", err.response.data.error);\n          });\n      }\n    });\n  };\n\n  //======================Pagination====================\n\n  ///================show data in table\n\n  const columns = [\n    {\n      title: \"ຊື່\",\n      dataIndex: \"username\",\n      key: \"1\",\n      filterDropdown: ({ setSelectedKeys, selectedKeys, confirm }) => {\n        return (\n          <Input\n            autoFocus\n            placeholder=\"ຄົ້ນຫາ...\"\n            value={selectedKeys[0]}\n            onChange={(e) => {\n              setSelectedKeys(e.target.value ? [e.target.value] : []);\n              confirm({ closeDropdown: false });\n            }}\n            onPressEnter={() => {\n              confirm();\n            }}\n          ></Input>\n        );\n      },\n      filterIcon: () => {\n        return <SearchOutlined />;\n      },\n      onFilter: (value, record) => {\n        //if data is number (record.number == value)\n        return record.username.toLowerCase().includes(value.toLowerCase());\n      },\n      onFilter: (value, record) => record.username.indexOf(value) === 0,\n      sorter: (a, b) => a.username.length - b.username.length,\n    },\n    {\n      title: \"ຕຳແໜ່ງ\",\n      key: \"2\",\n      render: (row) => (\n        <div>\n          <p className=\"btn btn-light\">{row.role_}</p>\n          <p className=\"btn btn-light\">{userType(row.role_sub_branch)}</p>\n        </div>\n      ),\n    },\n\n    {\n      title: \"ເບີໂທລະສັບ\",\n      dataIndex: \"phone\",\n      key: \"3\",\n      filterDropdown: ({ setSelectedKeys, selectedKeys, confirm }) => {\n        return (\n          <Input\n            autoFocus\n            placeholder=\"ຄົ້ນຫາ...\"\n            value={selectedKeys[0]}\n            onChange={(e) => {\n              setSelectedKeys(e.target.value ? [e.target.value] : []);\n              confirm({ closeDropdown: false });\n            }}\n            onPressEnter={() => {\n              confirm();\n            }}\n          ></Input>\n        );\n      },\n      filterIcon: () => {\n        return <SearchOutlined />;\n      },\n      onFilter: (value, record) => {\n        //if data is number (record.number == value)\n        return record.phone.toLowerCase().includes(value.toLowerCase());\n      },\n    },\n    {\n      title: \"ເບີ Whatsapp\",\n      dataIndex: \"WhatsApp\",\n      key: \"4\",\n      filterDropdown: ({ setSelectedKeys, selectedKeys, confirm }) => {\n        return (\n          <Input\n            autoFocus\n            placeholder=\"ຄົ້ນຫາ...\"\n            value={selectedKeys[0]}\n            onChange={(e) => {\n              setSelectedKeys(e.target.value ? [e.target.value] : []);\n              confirm({ closeDropdown: false });\n            }}\n            onPressEnter={() => {\n              confirm();\n            }}\n          ></Input>\n        );\n      },\n      filterIcon: () => {\n        return <SearchOutlined />;\n      },\n      onFilter: (value, record) => {\n        //if data is number (record.number == value)\n        return record.WhatsApp.toLowerCase().includes(value.toLowerCase());\n      },\n    },\n    {\n      title: \"ເຄື່ອງມື\",\n      key: \"5\",\n      render: (row) => (\n        <div className=\"\">\n          <Link className=\"btn\" to={\"/dashboard/u_branch/update/\" + row._id}>\n            <i className=\"far fa-edit text-warning \"></i>\n          </Link>\n\n          <button\n            onClick={() => handleClick(row._id)}\n            type=\"button\"\n            className=\"btn text-danger\"\n          >\n            <i className=\"far fa-trash-alt\"></i>\n          </button>\n        </div>\n      ),\n    },\n  ];\n\n  return (\n    <>\n      <div className=\"container py-4 position-relative\">\n        <div className=\"card card-body mx-1 \">\n          <div className=\"row\">\n            <div className=\"col-12 col-md-4 mb-3\">\n              <Link to=\"/dashboard/u_branch/add-user\">\n                <button className=\"btn btn-danger\">ເພີ່ມພະນັກງານ</button>\n              </Link>\n            </div>\n            <div className=\"col-12 col-md-4 mb-2\">\n              <h3 className=\"text-danger \">ລາຍຊື່ພະນັກງານ</h3>\n            </div>\n            <div className=\"col-12 col-md-4 mb-2\"></div>\n          </div>\n\n          <div className=\"table-responsive \">\n            <Table\n              columns={columns}\n              dataSource={filterData}\n              bordered\n              filters\n              sorter\n              pagination={{\n                total: filterData,\n                showTotal: (total) => `ລາຍການທັງໝົດ ${total} ລາຍການ`,\n                current: page,\n                pageSize: pageSize,\n                pageSizeOptions: [\"5\", \"10\", \"20\", \"50\", \"100\"],\n                showPageSizeOptions: true,\n                onChange: (page, pageSize) => {\n                  setPage(page);\n                  setPageSize(pageSize);\n                },\n              }}\n            />\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default ListStaff;\n"],"sourceRoot":""}